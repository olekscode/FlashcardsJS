(this["webpackJsonpflashcards.js"]=this["webpackJsonpflashcards.js"]||[]).push([[0],{11:function(e,t,r){e.exports=r(17)},16:function(e,t,r){},17:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),u=r(7),o=r.n(u),i=r(10),c=r(1),s=r(2),l=r(4),d=r(3);var h=function(e){return a.a.createElement("div",null,"Box: ",e.numberOfCards)};function f(e,t){return Math.floor(Math.random()*(t-e))+e}function v(e,t){var r=t.reduce((function(e,t){return e+t}),0),n=t.map((function(e){return e/r}));r=0;var a=n.map((function(e){return r+=e})),u=Math.random();return e[a.findIndex((function(e){return e>=u}))]}function m(e){for(var t=e.length-1;t>0;t--){var r=f(0,t+1),n=[e[r],e[t]];e[t]=n[0],e[r]=n[1]}return e}var p=function(){function e(t,r){Object(c.a)(this,e),this.cards=t,this.probability=r}return Object(s.a)(e,[{key:"isEmpty",value:function(){return 0===this.numberOfCards}},{key:"includesCard",value:function(e){return this.cards.some((function(t){return t.source===e.source&&t.target===e.target}))}},{key:"includesCardWithSource",value:function(e){return this.cards.some((function(t){return t.source===e}))}},{key:"addCard",value:function(e){this.cards.push(e)}},{key:"removeCard",value:function(e){this.cards.splice(this.cards.indexOf(e),1)}},{key:"chooseRandomCard",value:function(){return(e=this.cards)[f(0,e.length)];var e}},{key:"numberOfCards",get:function(){return this.cards.length}}]),e}(),b=r(8),g=r(5),C=function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).state={source:"",target:""},n.handleSubmit=n.handleSubmit.bind(Object(g.a)(n)),n.handleInputChange=n.handleInputChange.bind(Object(g.a)(n)),n}return Object(s.a)(r,[{key:"handleSubmit",value:function(e){try{this.props.onSubmit(this.state)}catch(t){alert(t)}e.preventDefault()}},{key:"handleInputChange",value:function(e){var t=e.target.name,r=e.target.value;this.setState(Object(b.a)({},t,r))}},{key:"render",value:function(){return a.a.createElement("form",{onSubmit:this.handleSubmit},a.a.createElement("label",null,"Source:",a.a.createElement("input",{type:"text",name:"source",value:this.state.source,onChange:this.handleInputChange,required:!0})),a.a.createElement("label",null,"Target:",a.a.createElement("input",{type:"text",name:"target",value:this.state.target,onChange:this.handleInputChange,required:!0})),a.a.createElement("input",{type:"submit",value:"Submit"}))}}]),r}(a.a.Component),y=(a.a.Component,function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).handleClick=n.handleClick.bind(Object(g.a)(n)),n}return Object(s.a)(r,[{key:"handleClick",value:function(e){this.props.onClick(this.props.value)}},{key:"render",value:function(){return a.a.createElement("button",{style:{color:this.props.active?"red":"black"},onClick:this.handleClick},this.props.value)}}]),r}(a.a.Component)),k=function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(e){var n;Object(c.a)(this,r);var a=(n=t.call(this,e)).props.cards.map((function(e){return e.source})),u=n.props.cards.map((function(e){return e.target}));return m(a),m(u),n.state={activeSource:void 0,activeTarget:void 0,shuffledSources:a,shuffledTargets:u},n.result={passed:new Set,failed:new Set},n}return Object(s.a)(r,[{key:"recordCorrectAnswer",value:function(e){this.result.failed.has(e)||this.result.passed.add(e),console.log(this.result)}},{key:"recordWrongAnswer",value:function(e){this.result.failed.add(e),console.log(this.result)}},{key:"checkAnswer",value:function(e,t,r,n){var a=t.cards.find((function(e){return e.source===r}));return n===a.target?(this.recordCorrectAnswer(a),{activeSource:void 0,activeTarget:void 0,shuffledSources:e.shuffledSources.filter((function(e){return e!==a.source})),shuffledTargets:e.shuffledTargets.filter((function(e){return e!==a.target}))}):(this.recordWrongAnswer(a),{activeSource:void 0,activeTarget:void 0})}},{key:"handleSourceButtonClick",value:function(e){var t=this;this.setState((function(r,n){return!r.activeSource&&r.activeTarget?t.checkAnswer(r,n,e,r.activeTarget):{activeSource:e}}),(function(){t.state.shuffledSources.length||t.props.onSubmit(t.result)}))}},{key:"handleTargetButtonClick",value:function(e){var t=this;this.setState((function(r,n){return r.activeSource&&!r.activeTarget?t.checkAnswer(r,n,r.activeSource,e):{activeTarget:e}}),(function(){t.state.shuffledSources.length||t.props.onSubmit(t.result)}))}},{key:"render",value:function(){var e=this;return a.a.createElement("table",null,a.a.createElement("tbody",null,this.state.shuffledSources.map((function(t,r){return a.a.createElement("tr",{key:t},a.a.createElement("td",null,a.a.createElement(y,{value:e.state.shuffledSources[r],onClick:function(t){return e.handleSourceButtonClick(t)},active:e.state.activeSource===e.state.shuffledSources[r]})),a.a.createElement("td",null,a.a.createElement(y,{value:e.state.shuffledTargets[r],onClick:function(t){return e.handleTargetButtonClick(t)},active:e.state.activeTarget===e.state.shuffledTargets[r]})))}))))}}]),r}(a.a.Component),S=function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).boxes=e.boxes.map((function(e){return new p(e.cards,parseFloat(e.probability))})),n.state={boxSizes:n.boxes.map((function(){return 0}))},n}return Object(s.a)(r,[{key:"componentDidMount",value:function(){this.updateBoxSizes()}},{key:"updateBoxSizes",value:function(){this.setState({boxSizes:this.boxes.map((function(e){return e.numberOfCards}))})}},{key:"chooseRandomNonEmptyBox",value:function(){var e=this.boxes.filter((function(e){return!e.isEmpty()})),t=e.map((function(e){return e.probability}));return v(e,t)}},{key:"chooseRandomCard",value:function(){return this.chooseRandomNonEmptyBox().chooseRandomCard()}},{key:"chooseRandomCardsWithoutRepetition",value:function(e){var t,r,n=this.boxes.map((function(e){return e.cards.map((function(t){return{card:t,weight:e.probability}}))})).flat().reduce((function(e,t){return e.some((function(e){return e.card.source===t.card.source}))?e:[].concat(Object(i.a)(e),[t])}),[]),a=n.map((function(e){return e.card})),u=n.map((function(e){return e.weight}));if(a.length<=e)return a;for(var o=[],c=0;c<e;++c)t=v(a,u),o.push(t),r=a.indexOf(t),a.splice(r,1),u.splice(r,1);return o}},{key:"validateNewCard",value:function(e){if(this.boxes.some((function(t){return t.includesCardWithSource(e.source)})))throw'A card with source "'.concat(e.source,'" already exists')}},{key:"addCard",value:function(e){this.validateNewCard(e),this.boxes[0].addCard({source:e.source,target:e.target}),this.updateBoxSizes()}},{key:"moveCard",value:function(e,t,r){this.boxes[t].removeCard(e),this.boxes[r].addCard(e),this.updateBoxSizes()}},{key:"moveCardForward",value:function(e){var t=this.boxes.findIndex((function(t){return t.includesCard(e)}));if(t!==this.boxes.length-1){var r=t+1;this.moveCard(e,t,r)}}},{key:"moveCardBackward",value:function(e){var t=this.boxes.findIndex((function(t){return t.includesCard(e)}));0!==t&&this.moveCard(e,t,0)}},{key:"handleExerciseResult",value:function(e){var t=this;e.passed.forEach((function(e){return t.moveCardForward(e)})),e.failed.forEach((function(e){return t.moveCardBackward(e)}))}},{key:"render",value:function(){var e=this;return a.a.createElement("div",null,this.state.boxSizes.map((function(e,t){return a.a.createElement(h,{key:t,numberOfCards:e})})),a.a.createElement(C,{onSubmit:function(t){return e.addCard(t)}}),a.a.createElement(k,{cards:this.chooseRandomCardsWithoutRepetition(10),onSubmit:function(t){return e.handleExerciseResult(t)}}))}}]),r}(a.a.Component),x=(r(16),r(9)),O=a.a.createElement(S,{boxes:x});O=a.a.createElement(a.a.StrictMode,null,O),o.a.render(O,document.getElementById("root"))},9:function(e){e.exports=JSON.parse('[{"probability":"0.5","cards":[{"source":"bonjour","target":"hello"},{"source":"bonsoir","target":"good evening"},{"source":"amour","target":"love"},{"source":"poisson","target":"fish"},{"source":"nuit","target":"night"},{"source":"rouge","target":"red"},{"source":"chemin","target":"way"},{"source":"livre","target":"book"},{"source":"fille","target":"girl"},{"source":"aigu\xeb","target":"sharp"}]},{"probability":"0.3","cards":[{"source":"pomme","target":"apple"}]},{"probability":"0.15","cards":[]},{"probability":"0.04","cards":[]},{"probability":"0.01","cards":[]}]')}},[[11,1,2]]]);
//# sourceMappingURL=main.3a089f26.chunk.js.map